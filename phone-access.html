<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebRTC VLM Detection - QR Code</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .qr-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px;
        }
        .url-display {
            font-size: 18px;
            background: #333;
            padding: 15px;
            border-radius: 5px;
            word-break: break-all;
            margin: 10px 0;
        }
        .instructions {
            max-width: 600px;
            text-align: center;
            line-height: 1.6;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
</head>
<body>
    <h1>ðŸ“± WebRTC VLM Detection</h1>
    
    <div class="instructions">
        <h2>ðŸ”— Mobile Phone Access</h2>
        <p>Scan the QR code below with your phone camera or manually enter the URL:</p>
    </div>

    <div class="url-display" id="phoneUrl">
        Loading...
    </div>

    <div class="qr-container">
        <canvas id="qrcode"></canvas>
    </div>

    <div class="instructions">
        <h3>ðŸ“‹ Instructions:</h3>
        <ol style="text-align: left;">
            <li>Ensure your phone and computer are on the <strong>same WiFi network</strong></li>
            <li>Scan the QR code with your phone camera</li>
            <li>Or manually type the URL shown above into your phone browser</li>
            <li>Allow camera permissions when prompted</li>
            <li>You should see live video with detection overlays!</li>
        </ol>

        <h3>ðŸ”§ Troubleshooting:</h3>
        <ul style="text-align: left;">
            <li>If QR doesn't work, try typing the URL manually</li>
            <li>Make sure you're using WiFi, not mobile data</li>
            <li>Try refreshing the page on both devices</li>
            <li>Check that both devices are on the same network</li>
        </ul>
    </div>

    <script>
        // Get computer's IP address
        const computerIP = '10.124.0.183'; // Your computer's IP
        const phoneUrl = `http://${computerIP}:3000`;
        
        // Display the URL
        document.getElementById('phoneUrl').textContent = phoneUrl;
        
        // Generate QR code
        QRCode.toCanvas(document.getElementById('qrcode'), phoneUrl, {
            width: 300,
            margin: 2,
            color: {
                dark: '#000000',
                light: '#FFFFFF'
            }
        }, function (error) {
            if (error) console.error(error);
            console.log('QR code generated successfully!');
        });
    </script>
</body>
</html>
